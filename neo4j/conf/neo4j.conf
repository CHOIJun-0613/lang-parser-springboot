# Neo4j Configuration File
# 이 파일은 Neo4j 서버의 주요 설정을 관리합니다.
# 환경변수로도 설정 가능: NEO4J_<설정명> (점을 언더스코어로 변경)

#*****************************************************************
# Network connector configuration
#*****************************************************************

# Bolt connector
server.bolt.enabled=true
server.bolt.listen_address=0.0.0.0:7687

# HTTP Connector
server.http.enabled=true
server.http.listen_address=0.0.0.0:7474

# HTTPS Connector (비활성화)
server.https.enabled=false

# 기본 리스닝 주소
server.default_listen_address=0.0.0.0

#*****************************************************************
# Memory Settings
#*****************************************************************

# JVM Heap 초기 크기
server.memory.heap.initial_size=512m

# JVM Heap 최대 크기
server.memory.heap.max_size=1g

# 페이지 캐시 크기 (쿼리 성능에 영향)
server.memory.pagecache.size=512m

#*****************************************************************
# Database Settings
#*****************************************************************

# 기본 데이터베이스
initial.dbms.default_database=csadb01

#*****************************************************************
# Security Settings
#*****************************************************************

# 인증 활성화
dbms.security.auth_enabled=true

# 프로시저 보안 설정 (APOC 등)
dbms.security.procedures.unrestricted=apoc.*

# 프로시저 허용 목록
dbms.security.procedures.allowlist=apoc.*,gds.*

#*****************************************************************
# Transaction Settings
#*****************************************************************

# 트랜잭션 타임아웃 (기본: 0 = 무제한)
db.transaction.timeout=60s

# 쿼리 타임아웃
db.transaction.concurrent.maximum=1000

#*****************************************************************
# Logging Settings
#*****************************************************************

# 로그 레벨: DEBUG, INFO, WARN, ERROR
server.logs.debug.level=INFO

# 쿼리 로깅 (느린 쿼리 추적)
db.logs.query.enabled=INFO
db.logs.query.threshold=1s

#*****************************************************************
# Performance Settings
#*****************************************************************

# 동시 연결 수
server.bolt.thread_pool_min_size=5
server.bolt.thread_pool_max_size=400

# 쿼리 캐시
db.query_cache_size=1000

#*****************************************************************
# Backup & Maintenance
#*****************************************************************

# 체크포인트 간격
db.checkpoint.interval.time=15m
db.checkpoint.interval.tx=100000

#*****************************************************************
# Plugins
#*****************************************************************

# APOC 및 GDS 플러그인 활성화는 docker-compose.yml의 NEO4J_PLUGINS 환경변수로 관리
