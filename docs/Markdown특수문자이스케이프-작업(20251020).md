# Markdown íŠ¹ìˆ˜ë¬¸ì ì´ìŠ¤ì¼€ì´í”„ ì¶”ê°€ ì‘ì—…

**ì‘ì„±ì¼**: 2025-10-20
**ì‘ì—…ì**: Claude Code
**ìš°ì„ ìˆœìœ„**: ğŸŸ¢ Low
**ì˜ˆìƒ ì‹œê°„**: 30ë¶„

---

## ğŸ“‹ ì‘ì—… ê°œìš”

Markdown í…Œì´ë¸” ì…€ì— íŠ¹ìˆ˜ë¬¸ì(íŠ¹íˆ `|`, `\n`)ê°€ í¬í•¨ë  ê²½ìš° í…Œì´ë¸” êµ¬ì¡°ê°€ ê¹¨ì§€ëŠ” ë¬¸ì œë¥¼ ë°©ì§€í•©ë‹ˆë‹¤.

---

## ğŸ› ë¬¸ì œ ìƒí™©

### ë¬¸ì œ ì‹œë‚˜ë¦¬ì˜¤
```java
// Java ì½”ë“œ
@JsonProperty(value="user|admin")  // â† íŒŒì´í”„ ë¬¸ì í¬í•¨
private Map<String, List<User>> data;  // â† ì œë„¤ë¦­ íƒ€ì…
```

### í˜„ì¬ ì½”ë“œ
```python
# template.py:116
lines.append(
    f"| {idx} | {field.name} | {field.logical_name or '-'} | {field.type} | "
    f"{modifiers} | {annotations} | {initial_value} | {description} |"
)
```

### ìƒì„±ëœ Markdown (ë¬¸ì œ ë°œìƒ)
```markdown
| 1 | data | ë°ì´í„° | Map<String, List<User>> | private | @JsonProperty(value="user|admin") | - | ì‚¬ìš©ì ë°ì´í„° |
```

**ê²°ê³¼**: íŒŒì´í”„ ë¬¸ìë¡œ ì¸í•´ ì»¬ëŸ¼ì´ ì˜ëª» êµ¬ë¶„ë¨

---

## ğŸ”§ í•´ê²° ë°©ì•ˆ

### í—¬í¼ ë©”ì„œë“œ ì¶”ê°€
```python
def _escape_markdown_table_cell(self, text: str) -> str:
    """
    Markdown í…Œì´ë¸” ì…€ ë‚´ íŠ¹ìˆ˜ë¬¸ì ì´ìŠ¤ì¼€ì´í”„

    Args:
        text: ì´ìŠ¤ì¼€ì´í”„í•  í…ìŠ¤íŠ¸

    Returns:
        ì´ìŠ¤ì¼€ì´í”„ëœ í…ìŠ¤íŠ¸
    """
    if not text or text == '-':
        return text

    # íŒŒì´í”„ ë¬¸ìë¥¼ HTML ì—”í‹°í‹°ë¡œ ì¹˜í™˜
    text = text.replace('|', '&#124;')

    # ì¤„ë°”ê¿ˆì„ ê³µë°±ìœ¼ë¡œ ì¹˜í™˜
    text = text.replace('\n', ' ').replace('\r', '')

    # ë°±í‹±ì„ ì´ìŠ¤ì¼€ì´í”„ (ì½”ë“œ ë¸”ë¡ ë°©ì§€)
    text = text.replace('`', '\\`')

    return text
```

---

## ğŸ“ ìˆ˜ì • ê³„íš

### Step 1: í—¬í¼ ë©”ì„œë“œ ì¶”ê°€
**íŒŒì¼**: `csa/services/class_spec/template.py`

**ìœ„ì¹˜**: ClassSpecTemplate í´ë˜ìŠ¤ ë‚´ë¶€ (Line ~30)

---

### Step 2: í•„ë“œ ë Œë”ë§ì— ì ìš©
**íŒŒì¼**: `csa/services/class_spec/template.py:_render_fields()`

**Before**:
```python
lines.append(
    f"| {idx} | {field.name} | {field.logical_name or '-'} | {field.type} | "
    f"{modifiers} | {annotations} | {initial_value} | {description} |"
)
```

**After**:
```python
lines.append(
    f"| {idx} | {self._escape_markdown_table_cell(field.name)} | "
    f"{self._escape_markdown_table_cell(field.logical_name or '-')} | "
    f"{self._escape_markdown_table_cell(field.type)} | "
    f"{self._escape_markdown_table_cell(modifiers)} | "
    f"{self._escape_markdown_table_cell(annotations)} | "
    f"{self._escape_markdown_table_cell(initial_value)} | "
    f"{self._escape_markdown_table_cell(description)} |"
)
```

---

### Step 3: ë©”ì„œë“œ ë Œë”ë§ì— ì ìš©
**íŒŒì¼**: `csa/services/class_spec/template.py:_render_method_group()`

**Before**:
```python
lines.append(
    f"| {idx} | {method.name} | {method.logical_name or '-'} | {method.return_type} | "
    f"{params_str} | {annotations} | {description} |"
)
```

**After**:
```python
lines.append(
    f"| {idx} | {self._escape_markdown_table_cell(method.name)} | "
    f"{self._escape_markdown_table_cell(method.logical_name or '-')} | "
    f"{self._escape_markdown_table_cell(method.return_type)} | "
    f"{self._escape_markdown_table_cell(params_str)} | "
    f"{self._escape_markdown_table_cell(annotations)} | "
    f"{self._escape_markdown_table_cell(description)} |"
)
```

---

### Step 4: íŒŒë¼ë¯¸í„° ë Œë”ë§ì— ì ìš©
**íŒŒì¼**: `csa/services/class_spec/template.py:_render_method_detail()`

**Before**:
```python
lines.append(
    f"| {idx} | {param.name} | {param.logical_name or '-'} | {param.type} | "
    f"{required} | {param.description or '-'} |"
)
```

**After**:
```python
lines.append(
    f"| {idx} | {self._escape_markdown_table_cell(param.name)} | "
    f"{self._escape_markdown_table_cell(param.logical_name or '-')} | "
    f"{self._escape_markdown_table_cell(param.type)} | "
    f"{required} | {self._escape_markdown_table_cell(param.description or '-')} |"
)
```

---

### Step 5: ì˜ì¡´ì„±/í…Œì´ë¸” ë Œë”ë§ì— ì ìš©
ê¸°íƒ€ í…Œì´ë¸” ì¶œë ¥ ë¶€ë¶„ì—ë„ ë™ì¼í•˜ê²Œ ì ìš©

---

## âœ… í…ŒìŠ¤íŠ¸ ê³„íš

### 1. íŠ¹ìˆ˜ë¬¸ì í¬í•¨ ë°ì´í„° í…ŒìŠ¤íŠ¸
```python
# í…ŒìŠ¤íŠ¸ìš© ëª¨ë¸ ìƒì„±
field = FieldSpec(
    name="data",
    type="Map<String, List<User>>",
    annotations=["@JsonProperty(value=\"user|admin\")"],
    description="ì‚¬ìš©ì|ê´€ë¦¬ì ë°ì´í„°\nì—¬ëŸ¬ ì¤„"
)

template = ClassSpecTemplate()
result = template._escape_markdown_table_cell(field.type)
assert "&#124;" not in result  # Map<String, List<User>>ëŠ” íŒŒì´í”„ ì—†ìŒ

result = template._escape_markdown_table_cell(field.annotations[0])
assert "&#124;" in result  # @JsonProperty(value="user&#124;admin")

result = template._escape_markdown_table_cell(field.description)
assert "\n" not in result  # ì¤„ë°”ê¿ˆ ì œê±°ë¨
```

### 2. í†µí•© í…ŒìŠ¤íŠ¸
```bash
python -m csa.cli.main class-spec \
  --project-name car-center-devlab \
  --class-name NotificationRepository
```

**ê¸°ëŒ€ ê²°ê³¼**:
- âœ… Markdown íŒŒì¼ ì •ìƒ ìƒì„±
- âœ… í…Œì´ë¸” êµ¬ì¡° ìœ ì§€
- âœ… GitHub/IDEì—ì„œ ë Œë”ë§ ì •ìƒ

---

## ğŸ“Š ì˜í–¥ ë²”ìœ„

### ìˆ˜ì • íŒŒì¼
- `csa/services/class_spec/template.py` (1ê°œ íŒŒì¼)

### ìˆ˜ì • ë©”ì„œë“œ
- `_escape_markdown_table_cell()` - ì‹ ê·œ ì¶”ê°€
- `_render_fields()` - ì ìš©
- `_render_method_group()` - ì ìš©
- `_render_method_detail()` - ì ìš©
- `_render_dependencies()` - ì ìš©
- `_render_database_info()` - ì ìš©

### ì˜ˆìƒ ë¼ì¸ ìˆ˜
- **Before**: ~300ì¤„
- **After**: ~350ì¤„ (í—¬í¼ + ì´ìŠ¤ì¼€ì´í”„ ì ìš©)
- **ì¦ê°€**: +50ì¤„ (17%)

---

## ğŸ“‹ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] Step 1: `_escape_markdown_table_cell()` í—¬í¼ ì¶”ê°€
- [ ] Step 2: `_render_fields()` ì ìš©
- [ ] Step 3: `_render_method_group()` ì ìš©
- [ ] Step 4: `_render_method_detail()` ì ìš©
- [ ] Step 5: ê¸°íƒ€ í…Œì´ë¸” ë Œë”ë§ ì ìš©
- [ ] í…ŒìŠ¤íŠ¸ 1: ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (ì„ íƒ)
- [ ] í…ŒìŠ¤íŠ¸ 2: í†µí•© í…ŒìŠ¤íŠ¸ (í•„ìˆ˜)
- [ ] Markdown ë Œë”ë§ í™•ì¸
- [ ] Git commit

---

## ğŸ¯ ì™„ë£Œ ê¸°ì¤€

1. âœ… íŠ¹ìˆ˜ë¬¸ì ì´ìŠ¤ì¼€ì´í”„ ì²˜ë¦¬
2. âœ… í…Œì´ë¸” êµ¬ì¡° ìœ ì§€
3. âœ… ê¸°ì¡´ ê¸°ëŠ¥ ì •ìƒ ì‘ë™

---

## ğŸ“ ì‘ì—… ë¡œê·¸

### ì‹œì‘ ì‹œê°„
- 2025-10-20 21:10:00

### ì¢…ë£Œ ì‹œê°„
- (ì‘ì—… ì™„ë£Œ í›„ ê¸°ë¡)

### ì‹¤ì œ ì†Œìš” ì‹œê°„
- (ì‘ì—… ì™„ë£Œ í›„ ê¸°ë¡)

### ì´ìŠˆ/íŠ¹ì´ì‚¬í•­
- (ì‘ì—… ì¤‘ ë°œê²¬ëœ ì´ìŠˆ ê¸°ë¡)
