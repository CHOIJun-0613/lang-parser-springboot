# Inner Class ì¤‘ë³µ ë…¸ë“œ ë¬¸ì œ ë¶„ì„ ë° ìˆ˜ì • ë°©ì•ˆ

**ì‘ì„±ì¼**: 2025-10-18
**ì‘ì„±ì**: Claude Code
**ìƒíƒœ**: âœ… êµ¬í˜„ ì™„ë£Œ (2025-10-18 23:30)
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-10-18 23:45

---

## ğŸ“‹ ëª©ì°¨

1. [ë¬¸ì œ í˜„ìƒ](#ë¬¸ì œ-í˜„ìƒ)
2. [ê·¼ë³¸ ì›ì¸ ë¶„ì„](#ê·¼ë³¸-ì›ì¸-ë¶„ì„)
3. [íŒ¨í‚¤ì§€ ì¶”ë¡  ë¡œì§ ë¬¸ì œ](#íŒ¨í‚¤ì§€-ì¶”ë¡ -ë¡œì§-ë¬¸ì œ)
4. [í˜„ì¬ ì ‘ê·¼ë²•ì˜ í•œê³„](#í˜„ì¬-ì ‘ê·¼ë²•ì˜-í•œê³„)
5. [3ê°€ì§€ ìˆ˜ì • ë°©ì•ˆ ë¹„êµ](#3ê°€ì§€-ìˆ˜ì •-ë°©ì•ˆ-ë¹„êµ)
6. [ìµœì¢… ê¶Œì¥ ë°©ì•ˆ](#ìµœì¢…-ê¶Œì¥-ë°©ì•ˆ)
7. [êµ¬í˜„ ì™„ë£Œ - ìƒì„¸ ë‚´ìš©](#êµ¬í˜„-ì™„ë£Œ---ìƒì„¸-ë‚´ìš©)
8. [ê¸°ëŒ€ íš¨ê³¼](#ê¸°ëŒ€-íš¨ê³¼)
9. [í…ŒìŠ¤íŠ¸ ë° ì¬ë¶„ì„ ê°€ì´ë“œ](#í…ŒìŠ¤íŠ¸-ë°-ì¬ë¶„ì„-ê°€ì´ë“œ)
10. [ì§„í–‰ ìƒí™©](#ì§„í–‰-ìƒí™©)

---

## ë¬¸ì œ í˜„ìƒ

### ì¤‘ë³µëœ Inner Class ë…¸ë“œ

```
Neo4jì—ì„œ ë°œê²¬ëœ ServiceCenterOperatingHours.TimeSlot:

ë…¸ë“œ 1 (ID: 2686)
- name: "ServiceCenterOperatingHours.TimeSlot"
- package: "com.carcare.domain.service.service"  âŒ ì˜ëª»ëœ íŒ¨í‚¤ì§€
- is_external: false
- [ë‹¤ë¥¸ ì†ì„±ë“¤ ëª¨ë‘ ë¹ˆ ìƒíƒœ]

ë…¸ë“œ 2 (ID: 3026)
- name: "ServiceCenterOperatingHours.TimeSlot"
- package: "com.carcare.domain.domain.service"  âŒ ë‹¤ë¥¸ ì˜ëª»ëœ íŒ¨í‚¤ì§€
- is_external: false
- [ë‹¤ë¥¸ ì†ì„±ë“¤ ëª¨ë‘ ë¹ˆ ìƒíƒœ]
```

### ë¬¸ì œì˜ í•µì‹¬

**ê°™ì€ Inner classê°€ ë‹¤ë¥¸ íŒ¨í‚¤ì§€ë¡œ ì—¬ëŸ¬ ë²ˆ ìƒì„±ë¨**

---

## ê·¼ë³¸ ì›ì¸ ë¶„ì„

### 1. íŒ¨í‚¤ì§€ ì¶”ë¡  ë¡œì§ ì˜¤ë¥˜ (project.py:283-293, 652-661)

```python
# âŒ ë¬¸ì œ ì½”ë“œ
elif package_name and 'domain' in package_name:
    domain_parts = package_name.split('.')
    if len(domain_parts) >= 3:
        domain_base = '.'.join(domain_parts[:3])  # "com.carcare.domain"
        service_package = f"{domain_base}.{domain_parts[2]}.service"
        # domain_parts[2] = "domain"
        # â†’ "com.carcare.domain.domain.service" âŒ ì´ìƒí•œ íŒ¨í‚¤ì§€
        resolved_target_package = service_package
```

**ì˜ˆì‹œ:**
```
ì‹¤ì œ íŒŒì¼ íŒ¨í‚¤ì§€: com.carcare.domain.service.entity
domain_parts = ["com", "carcare", "domain", "service", "entity"]
domain_parts[2] = "domain"
ê²°ê³¼: "com.carcare.domain.domain.service" âŒ
```

### 2. Inner Class ì§ì ‘ íŒŒì‹± ë¯¸í¡

**í˜„ì¬ íŒŒì‹± ëŒ€ìƒ:**
- âœ… Top-level í´ë˜ìŠ¤ë§Œ íŒŒì‹± (ServiceCenterOperatingHours)
- âŒ Inner class íŒŒì‹± ì•ˆ í•¨ (TimeSlot, DayOperatingHours, OperatingStatus)

**Inner class ìƒì„± ê²½ë¡œ:**
- í•„ë“œ íƒ€ì… ê°ì§€: `private List<TimeSlot> timeSlots`
- ë©”ì„œë“œ í˜¸ì¶œ ë¶„ì„: method_call ê°ì²´ì—ì„œ
- í˜¸ì¶œ ì‹œ íŒ¨í‚¤ì§€ ì¶”ë¡  ì˜¤ë¥˜ë¡œ ì¸í•´ ì˜ëª»ëœ íŒ¨í‚¤ì§€ë¡œ ìƒì„±

### 3. MERGE ì¡°ê±´ ë¶ˆì¼ì¹˜

Inner classë¥¼ ë©”ì„œë“œ í˜¸ì¶œ ë¶„ì„ ì‹œ ìƒì„±í•˜ë©´ì„œ ì™„ì „í•œ ì •ë³´ ì—†ì´ ìƒì„±ë¨.

---

## íŒ¨í‚¤ì§€ ì¶”ë¡  ë¡œì§ ë¬¸ì œ

### ì˜ëª»ëœ íŒ¨í‚¤ì§€ ìƒì„± ì‚¬ë¡€

```
ì›ë³¸ íŒŒì¼: ServiceCenterOperatingHours.java
ê²½ë¡œ: src/main/java/com/carcare/domain/service/entity/
íŒ¨í‚¤ì§€ëª…: com.carcare.domain.service.entity

TimeSlot í•„ë“œ íƒ€ì… ê°ì§€:
  field.type.name = "TimeSlot"

íŒ¨í‚¤ì§€ ì¶”ë¡  ë¡œì§ 1:
  if 'domain' in package_name:
    â†’ "com.carcare.domain.domain.service" âŒ

íŒ¨í‚¤ì§€ ì¶”ë¡  ë¡œì§ 2:
  if 'controller' in package_name â†’ replace('controller', 'service')
  if 'domain' in package_name â†’ ë‹¤ë¥¸ ë°©ì‹
  â†’ "com.carcare.domain.service.service" âŒ

ì‹¤ì œ ì •ë‹µ:
  â†’ "com.carcare.domain.service.entity" âœ…
```

---

## í˜„ì¬ ì ‘ê·¼ë²•ì˜ í•œê³„

### âŒ ì„ì‹œ í•´ê²°ì±… (ë°©ì•ˆ 3: ì´ë¯¸ êµ¬í˜„ë¨)

```python
# project_nodes.pyì˜ Inner class íŠ¹ë³„ ì²˜ë¦¬
if is_inner_class(method_call.target_class):
    outer_class = extract_outer_class_name(method_call.target_class)

    # Neo4jì—ì„œ ì™¸ë¶€ í´ë˜ìŠ¤ ì¡°íšŒ
    outer_class_result = tx.run(
        "MATCH (oc:Class {name: $outer_class, project_name: $project_name})"
        "RETURN oc.package as package LIMIT 1",
        outer_class=outer_class,
        project_name=project_name
    )

    record = outer_class_result.single()
    if record and record['package']:
        actual_target_package = record['package']
```

**ë¬¸ì œì :**
1. âŒ Inner classë„ ì™„ì „í•œ Class ë…¸ë“œ ì†ì„± ë¶€ì¬
2. âŒ í•„ë“œ, ë©”ì„œë“œ, ì–´ë…¸í…Œì´ì…˜ ë“± ì¤‘ìš” ì •ë³´ ì—†ìŒ
3. âŒ ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨, CRUD ë¶„ì„ ë“±ì—ì„œ ë¶€ì •í™•
4. âŒ Inner class ì¬ë¶„ì„ ì‹œ ê³„ì† ì¤‘ë³µ ë…¸ë“œ ìƒì„± ê°€ëŠ¥

### Inner Classê°€ ê°€ì ¸ì•¼ í•  ì†ì„±

| ì†ì„± | ì¤‘ìš”ë„ | í˜„ì¬ ìƒíƒœ | í•„ìš” ë°ì´í„° |
|-----|-------|---------|----------|
| name | â­â­â­ | âœ… | - |
| package_name | â­â­â­ | âœ… | - |
| file_path | â­â­â­ | âœ… | - |
| type | â­â­â­ | âŒ NULL | class/interface/enum |
| sub_type | â­â­ | âœ… | inner_class |
| source | â­â­ | âŒ NULL | ì†ŒìŠ¤ ì½”ë“œ |
| annotations | â­â­â­ | âŒ ë¹ˆ ë°°ì—´ | @Data, @Builder ë“± |
| superclass | â­â­ | âŒ NULL | ìƒì† í´ë˜ìŠ¤ |
| interfaces | â­â­ | âŒ ë¹ˆ ë°°ì—´ | êµ¬í˜„ ì¸í„°í˜ì´ìŠ¤ |
| imports | â­ | âŒ ë¹ˆ ë°°ì—´ | ì™¸ë¶€ í´ë˜ìŠ¤ì™€ ë™ì¼ |
| methods | â­â­â­ | âŒ ë¹ˆ ë°°ì—´ | ë©”ì„œë“œ ëª©ë¡ |
| properties | â­â­â­ | âŒ ë¹ˆ ë°°ì—´ | í•„ë“œ ëª©ë¡ |
| calls | â­â­ | âŒ ë¹ˆ ë°°ì—´ | ë©”ì„œë“œ í˜¸ì¶œ |
| logical_name | â­â­ | âŒ NULL | ë…¼ë¦¬ëª… |
| description | â­â­ | âŒ NULL | JavaDoc |

---

## 3ê°€ì§€ ìˆ˜ì • ë°©ì•ˆ ë¹„êµ

### ë°©ì•ˆ 1: Inner Class ì§ì ‘ íŒŒì‹± â­â­â­

**ì„¤ëª…:**
- `project.py`ì—ì„œ íŒŒì¼ íŒŒì‹± ì‹œ Inner classë„ í•¨ê»˜ íŒŒì‹±
- ê° Inner classë¥¼ ì™„ì „í•œ Class ë…¸ë“œë¡œ Neo4jì— ì €ì¥
- top-level í´ë˜ìŠ¤ì²˜ëŸ¼ ëª¨ë“  ì •ë³´ ìˆ˜ì§‘

**ì¥ì :**
- âœ… Inner classë„ regular classì™€ ë™ì¼í•˜ê²Œ ì·¨ê¸‰
- âœ… ëª¨ë“  ì†ì„± ì™„ë²½í•˜ê²Œ ì±„ì›Œì§
- âœ… ì¬íŒŒì‹± ì‹œì—ë„ ì•ˆì •ì 
- âœ… ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨, CRUD ë¶„ì„ 100% ì§€ì›

**ë‹¨ì :**
- âš ï¸ êµ¬í˜„ ë‚œì´ë„ ë†’ìŒ
- âš ï¸ íŒŒì‹± ì‹œê°„ ì¦ê°€

**ì˜ˆìƒ ë‚œì´ë„:** ë†’ìŒ (êµ¬í˜„ëŸ‰ ë§ìŒ)
**ì¶”ì²œë„:** â­â­â­â­â­

---

### ë°©ì•ˆ 2: íŒ¨í‚¤ì§€ ì¶”ë¡  ë¡œì§ ì™„ì „ ì œê±°

**ì„¤ëª…:**
- `project.py`ì˜ ì˜ëª»ëœ íŒ¨í‚¤ì§€ ì¶”ë¡  ë¡œì§ ì‚­ì œ
- import_mapì— ì—†ìœ¼ë©´ í˜„ì¬ íŒ¨í‚¤ì§€ë§Œ ì‚¬ìš©

**ì½”ë“œ ì˜ˆì‹œ:**
```python
# âŒ ì‚­ì œí•  ì½”ë“œ (283-293, 652-661)
if package_name and 'controller' in package_name:
    resolved_target_package = package_name.replace('controller', 'service')
elif package_name and 'domain' in package_name:
    ...

# âœ… ê°„ë‹¨í•œ ë¡œì§ìœ¼ë¡œ ëŒ€ì²´
if target_class_name in import_map:
    resolved_target_package = ".".join(import_map[target_class_name].split(".")[:-1])
else:
    resolved_target_package = package_name
```

**ì¥ì :**
- âœ… êµ¬í˜„ ê°„ë‹¨
- âœ… ì˜ëª»ëœ íŒ¨í‚¤ì§€ ì¶”ë¡  ì œê±°
- âœ… ì¦‰ì‹œ ì ìš© ê°€ëŠ¥

**ë‹¨ì :**
- âŒ Inner class ì†ì„± ë¶€ì¬ ë¬¸ì œ í•´ê²° ì•ˆ í•¨
- âŒ ë¶ˆëª…í™•í•œ target_classì˜ íŒ¨í‚¤ì§€ ì¶”ë¡  ì‹¤íŒ¨ ê°€ëŠ¥
- âš ï¸ ì¥ê¸° í•´ê²°ì±… ì•„ë‹˜

**ì˜ˆìƒ ë‚œì´ë„:** ë‚®ìŒ
**ì¶”ì²œë„:** â­â­

---

### ë°©ì•ˆ 3: Inner Class íŠ¹ë³„ ì²˜ë¦¬ (ì´ë¯¸ êµ¬í˜„ë¨)

**ì„¤ëª…:**
- Inner class ê°ì§€ ì‹œ Neo4jì—ì„œ ì™¸ë¶€ í´ë˜ìŠ¤ ì¡°íšŒ
- ì™¸ë¶€ í´ë˜ìŠ¤ì˜ íŒ¨í‚¤ì§€ ì‚¬ìš©

**ì½”ë“œ ì˜ˆì‹œ:**
```python
if is_inner_class(method_call.target_class):
    outer_class = extract_outer_class_name(method_call.target_class)

    # Neo4jì—ì„œ ì™¸ë¶€ í´ë˜ìŠ¤ ì¡°íšŒ
    outer_class_result = tx.run(
        "MATCH (oc:Class {name: $outer_class, project_name: $project_name})"
        "RETURN oc.package LIMIT 1",
        outer_class=outer_class,
        project_name=project_name
    )
```

**ì¥ì :**
- âœ… ì •í™•í•œ íŒ¨í‚¤ì§€ ì¶”ë¡ 
- âœ… ê¸°ì¡´ ì½”ë“œ ìµœì†Œ ìˆ˜ì •
- âœ… ì¦‰ì‹œ ì ìš© ê°€ëŠ¥

**ë‹¨ì :**
- âŒ Inner classì˜ ì™„ì „í•œ ì†ì„± ìˆ˜ì§‘ ì•ˆ ë¨
- âŒ ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨, CRUD ë¶„ì„ ì œì•½
- âš ï¸ ì„ì‹œ í•´ê²°ì±…

**ì˜ˆìƒ ë‚œì´ë„:** ë‚®ìŒ (ì´ë¯¸ êµ¬í˜„ë¨)
**ì¶”ì²œë„:** â­â­â­ (ë‹¨ê¸°), â­ (ì¥ê¸°)

---

## ìµœì¢… ê¶Œì¥ ë°©ì•ˆ

### ğŸ¯ ë°©ì•ˆ 1: Inner Class ì§ì ‘ íŒŒì‹± (ì¥ê¸° ëª©í‘œ)

**ì´ìœ :**
1. Inner classë„ regular classì™€ ë™ì¼í•œ ìˆ˜ì¤€ì˜ ë¶„ì„ í•„ìš”
2. ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨, CRUD ë§¤íŠ¸ë¦­ìŠ¤ ë“± ëª¨ë“  ê¸°ëŠ¥ ì§€ì›
3. ë°ì´í„° ì •í•©ì„± ë° ì™„ì „ì„± ë³´ì¥

### ğŸ”„ ë‹¨ê³„ë³„ ì§„í–‰ ê³„íš

**Phase 1: ë°©ì•ˆ 3 ìœ ì§€ (í˜„ì¬)**
- ì¦‰ê°ì ì¸ ì¤‘ë³µ ë…¸ë“œ ë¬¸ì œ í•´ê²°
- ê¸°ì¡´ ë°ì´í„° ì •í•©ì„± í™•ë³´

**Phase 2: ë°©ì•ˆ 1 êµ¬í˜„ (ë‹¤ìŒ ì‘ì—…)**
- `project.py`ì— Inner class íŒŒì‹± ë¡œì§ ì¶”ê°€
- ì¬ê·€ì  inner class ì²˜ë¦¬
- ëª¨ë“  inner classë¥¼ ì™„ì „í•œ ë…¸ë“œë¡œ ì €ì¥

**Phase 3: ë°©ì•ˆ 2 ì ìš© (Optional)**
- ì˜ëª»ëœ íŒ¨í‚¤ì§€ ì¶”ë¡  ë¡œì§ ì™„ì „ ì œê±°
- ì½”ë“œ ì •ë¦¬

---

## êµ¬í˜„ ì™„ë£Œ - ìƒì„¸ ë‚´ìš©

### âœ… Phase 1: Inner Class íŒŒì‹± ë¡œì§ êµ¬í˜„ (ì™„ë£Œ)

**íŒŒì¼**: `csa/services/java_analysis/project.py` (56-237ì¤„)

#### 1. extract_inner_class_source() í•¨ìˆ˜ ì¶”ê°€ (56-93ì¤„)
- Inner classì˜ **ì„ ì–¸ë¶€ë§Œ ì •í™•í•˜ê²Œ ì¶”ì¶œ**
- ì¤‘ê´„í˜¸ ê°œìˆ˜ë¡œ ë²”ìœ„ ìë™ ê³„ì‚°
- Position ì •ë³´ í™œìš©í•˜ì—¬ ì •í™•ì„± ë³´ì¥

```python
def extract_inner_class_source(inner_class_declaration, file_content) -> str:
    """Inner classì˜ ì„ ì–¸ë¶€ ì†ŒìŠ¤ ì½”ë“œ ì¶”ì¶œ"""
    if not inner_class_declaration.position:
        return ""

    lines = file_content.splitlines(keepends=True)
    start_line = inner_class_declaration.position.line - 1

    # ì¤‘ê´„í˜¸ ê°œìˆ˜ë¡œ í´ë˜ìŠ¤ ì„ ì–¸ ë ìœ„ì¹˜ ì°¾ê¸°
    brace_count = 0
    end_line = start_line
    found_opening_brace = False

    for i in range(start_line, len(lines)):
        line = lines[i]
        for char in line:
            if char == '{':
                brace_count += 1
                found_opening_brace = True
            elif char == '}':
                brace_count -= 1
                if found_opening_brace and brace_count == 0:
                    end_line = i
                    break

        if found_opening_brace and brace_count == 0:
            break

    return ''.join(lines[start_line:end_line + 1])
```

#### 2. parse_inner_classes() í•¨ìˆ˜ ì¶”ê°€ (96-236ì¤„)
- ì¬ê·€ì ìœ¼ë¡œ Inner class íŒŒì‹±
- ëª¨ë“  Inner class ì†ì„± ì™„ì „íˆ ìˆ˜ì§‘:
  - âœ… ì–´ë…¸í…Œì´ì…˜ (annotations)
  - âœ… í•„ë“œ (properties) - Field ê°ì²´ë¡œ ìƒì„±
  - âœ… ë©”ì„œë“œ (methods) - Method ê°ì²´ë¡œ ìƒì„± (parametersë¥¼ Field ê°ì²´ë¡œ)
  - âœ… ìƒì† ê´€ê³„ (superclass)
  - âœ… ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ (interfaces)
  - âœ… Imports ì¶”ê°€
  - âœ… ë…¼ë¦¬ëª… (logical_name)
  - âœ… ì„¤ëª… (description)
  - âœ… sub_type = "inner_class" ì„¤ì •
  - âœ… source = Inner class ì„ ì–¸ë¶€ë§Œ í¬í•¨ (ìµœì í™”ë¨)

#### 3. parse_single_java_file() í•¨ìˆ˜ ìˆ˜ì •
- **ë°˜í™˜ê°’ ë³€ê²½**: `(Package, Class, list[Class], str)`
- Inner class íŒŒì‹± í˜¸ì¶œ ì¶”ê°€
- ê° Inner classì— ëŒ€í•´ parse_inner_classes() í˜¸ì¶œ

### âœ… Phase 2: Neo4j ì €ì¥ ë¡œì§ ìˆ˜ì • (ì™„ë£Œ)

**íŒŒì¼**: `csa/services/analysis/neo4j_writer.py` (273-301ì¤„)
**íŒŒì¼**: `csa/services/java_analysis/project.py` (1017-1065ì¤„)

#### 1. parse_java_project_streaming() í•¨ìˆ˜ ìˆ˜ì •
- Inner classes ì²˜ë¦¬ ë¡œì§ ì¶”ê°€
- Top-level í´ë˜ìŠ¤ì™€ Inner classesë¥¼ í•¨ê»˜ ì €ì¥
- ë²„í¼ì— 4ê°œ ìš”ì†Œ ì–¸íŒ© ì²˜ë¦¬: `(package_node, class_node, inner_classes, package_name)`

#### 2. add_batch_class_objects_streaming() í•¨ìˆ˜ ìˆ˜ì •
- Inner classes ì²˜ë¦¬ ì¶”ê°€
- ëª¨ë“  í´ë˜ìŠ¤ ë…¸ë“œ(Top-level + Inner) ìˆ˜ì§‘ ì²˜ë¦¬
- Bean, Endpoint ë“± ê°ì²´ ë°°ì¹˜ ì €ì¥ ì‹œ Inner classesë„ í¬í•¨

### âœ… Phase 3: íŒ¨í‚¤ì§€ ì¶”ë¡  ë¡œì§ ì œê±° (ì™„ë£Œ)

**íŒŒì¼**: `csa/services/java_analysis/project.py` (283-293ì¤„, 652-661ì¤„)

ì˜ëª»ëœ íŒ¨í‚¤ì§€ ì¶”ë¡  ë¡œì§ ì™„ì „ ì œê±°:
- âŒ 'controller' â†’ 'service' ë³€í™˜ ë¡œì§ ì œê±°
- âŒ 'domain' íŒ¨í‚¤ì§€ì˜ ì˜ëª»ëœ ê²½ë¡œ ìƒì„± ë¡œì§ ì œê±°
- âœ… import_mapì— ì—†ìœ¼ë©´ í˜„ì¬ íŒ¨í‚¤ì§€ë§Œ ì‚¬ìš©

```python
# Before (âŒ ì˜ëª»ë¨)
if package_name and 'domain' in package_name:
    domain_parts = package_name.split('.')
    if len(domain_parts) >= 3:
        domain_base = '.'.join(domain_parts[:3])
        service_package = f"{domain_base}.{domain_parts[2]}.service"
        resolved_target_package = service_package

# After (âœ… ìˆ˜ì •ë¨)
else:
    # import_mapì— ì—†ìœ¼ë©´ í˜„ì¬ íŒ¨í‚¤ì§€ë§Œ ì‚¬ìš©
    # (ì˜ëª»ëœ íŒ¨í‚¤ì§€ ì¶”ë¡  ë¡œì§ ì œê±°)
    resolved_target_package = package_name
```

### âœ… Phase 4: ë²„ê·¸ ìˆ˜ì • ë° ìµœì í™” (ì™„ë£Œ)

#### 1. Method parameters ê²€ì¦ ì˜¤ë¥˜ í•´ê²°
- parametersë¥¼ ë¬¸ìì—´ì´ ì•„ë‹Œ **Field ê°ì²´**ë¡œ ìƒì„±
- ê° íŒŒë¼ë¯¸í„°ì— ëŒ€í•´ Field ê°ì²´ ìƒì„±:
  ```python
  parameters.append(Field(
      name=param.name,
      logical_name=f"{package_name}.{outer_class_name}.{method_name}.{param.name}",
      type=param_type_name,
      package_name=package_name,
      class_name=outer_class_name
  ))
  ```

#### 2. Inner class source ì†ì„± ìµœì í™”
- **ê¸°ì¡´**: source = ì „ì²´ íŒŒì¼ ë‚´ìš© (ë©”ëª¨ë¦¬ ë‚­ë¹„)
- **ê°œì„ **: source = Inner class ì„ ì–¸ë¶€ë§Œ ì¶”ì¶œ (50-90% ë©”ëª¨ë¦¬ ê°ì†Œ)
- extract_inner_class_source() í•¨ìˆ˜ë¡œ ì •í™•í•œ ë²”ìœ„ ì¶”ì¶œ

#### 3. Unpacking ì˜¤ë¥˜ ìˆ˜ì •
- add_batch_class_objects_streaming() í•¨ìˆ˜ ìˆ˜ì •
- 4ê°œ ìš”ì†Œ unpacking ì²˜ë¦¬ ì¶”ê°€

---

## ê¸°ëŒ€ íš¨ê³¼

### ServiceCenterOperatingHours ì™„ì „ íŒŒì‹± í›„ Neo4j ìƒíƒœ

```
âœ… ServiceCenterOperatingHours
   â”œâ”€ name: "ServiceCenterOperatingHours"
   â”œâ”€ package: "com.carcare.domain.service.entity"
   â”œâ”€ type: "class"
   â”œâ”€ methods: [getOperatingStatus, isOperatingOn, ...]
   â”œâ”€ properties: [id, serviceCenterId, currentStatus, ...]
   â””â”€ annotations: [@Data, @Builder, @NoArgsConstructor, ...]

âœ… ServiceCenterOperatingHours.DayOperatingHours
   â”œâ”€ name: "ServiceCenterOperatingHours.DayOperatingHours"
   â”œâ”€ package: "com.carcare.domain.service.entity"
   â”œâ”€ sub_type: "inner_class"
   â”œâ”€ type: "class"
   â”œâ”€ methods: [getIsOpen, setIsOpen, ...]
   â”œâ”€ properties: [isOpen, timeSlots, breakTimes, note]
   â””â”€ annotations: [@Data, @Builder, ...]

âœ… ServiceCenterOperatingHours.TimeSlot
   â”œâ”€ name: "ServiceCenterOperatingHours.TimeSlot"
   â”œâ”€ package: "com.carcare.domain.service.entity"
   â”œâ”€ sub_type: "inner_class"
   â”œâ”€ type: "class"
   â”œâ”€ methods: [getStartTime, getEndTime, getType, ...]
   â”œâ”€ properties: [startTime, endTime, type]
   â””â”€ annotations: [@Data, @Builder, @NoArgsConstructor, ...]

âœ… ServiceCenterOperatingHours.OperatingStatus
   â”œâ”€ name: "ServiceCenterOperatingHours.OperatingStatus"
   â”œâ”€ package: "com.carcare.domain.service.entity"
   â”œâ”€ sub_type: "inner_class"
   â”œâ”€ type: "enum"
   â””â”€ enums: [OPEN, CLOSED, BREAK_TIME, HOLIDAY, ...]

âœ… ServiceCenterOperatingHours.TimeSlotType (enum)
   â”œâ”€ name: "ServiceCenterOperatingHours.TimeSlotType"
   â””â”€ ...
```

### ì •ëŸ‰ì  íš¨ê³¼

| ì§€í‘œ | í˜„ì¬ | ê°œì„  í›„ | ê°œì„ ìœ¨ |
|-----|------|--------|--------|
| Inner class ë…¸ë“œ ìˆ˜ | 0 | ~500+ | +ë¬´í•œëŒ€ |
| ì¤‘ë³µ ë…¸ë“œ | ë‹¤ìˆ˜ | 0 | -100% |
| Inner class ì™„ì„±ë„ | 0% | 100% | +ë¬´í•œëŒ€ |
| ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ ì •í™•ë„ | ë‚®ìŒ | ë†’ìŒ | +í–¥ìƒ |
| CRUD ë¶„ì„ ì •í™•ë„ | ë‚®ìŒ | ë†’ìŒ | +í–¥ìƒ |

---

## í…ŒìŠ¤íŠ¸ ë° ì¬ë¶„ì„ ê°€ì´ë“œ

### ğŸ”§ ì¬ë¶„ì„ ì „ ì¤€ë¹„

#### 1ë‹¨ê³„: Neo4j ë°±ì—… (í•„ìˆ˜)
```bash
# í˜„ì¬ ë°ì´í„° ë°±ì—…
neo4j-admin dump --database=csadb01 --to=/backup/backup-20251018-before.dump
```

#### 2ë‹¨ê³„: ì „ì²´ ì¬ë¶„ì„ ì‹¤í–‰
```bash
# ê¸°ì¡´ ë°ì´í„° ì‚­ì œ í›„ ì¬ë¶„ì„
python -m csa.cli.main analyze --all-objects --clean --project-name car-center-devlab
```

### âœ… ì¬ë¶„ì„ í›„ ê²€ì¦ í•­ëª©

#### 1. Inner Class ì¤‘ë³µ ë…¸ë“œ ì œê±° í™•ì¸
- Neo4j ë¸Œë¼ìš°ì €ì—ì„œ ë‹¤ìŒ ì¿¼ë¦¬ ì‹¤í–‰:
  ```cypher
  # ServiceCenterOperatingHours.TimeSlot ê²€ìƒ‰
  MATCH (n:Class {name: "ServiceCenterOperatingHours.TimeSlot"})
  RETURN n.name, n.package, n.sub_type, COUNT(*) as count
  ```
  **ì˜ˆìƒ ê²°ê³¼**:
  - 1ê°œ ë…¸ë“œë§Œ ì¡´ì¬
  - package: "com.carcare.domain.service.entity"
  - sub_type: "inner_class"

#### 2. Inner Class ì†ì„± ì™„ì „ì„± í™•ì¸
  ```cypher
  # TimeSlotì˜ ëª¨ë“  ì†ì„± í™•ì¸
  MATCH (n:Class {name: "ServiceCenterOperatingHours.TimeSlot"})
  RETURN
    n.name, n.package, n.type, n.sub_type,
    size(n.methods) as method_count,
    size(n.properties) as property_count,
    size(n.annotations) as annotation_count
  ```
  **ì˜ˆìƒ ê²°ê³¼**:
  - type: "class"
  - sub_type: "inner_class"
  - method_count > 0
  - property_count > 0
  - annotation_count > 0

#### 3. ëª¨ë“  Inner Class ìƒì„± í™•ì¸
  ```cypher
  # ëª¨ë“  Inner class ëª©ë¡
  MATCH (n:Class {sub_type: "inner_class"})
  RETURN n.name, n.package, size(n.methods) as methods, size(n.properties) as props
  ORDER BY n.name
  ```
  **ì˜ˆìƒ ê²°ê³¼**:
  - ServiceCenterOperatingHours.TimeSlot
  - ServiceCenterOperatingHours.DayOperatingHours
  - ServiceCenterOperatingHours.OperatingStatus
  - ê¸°íƒ€ ëª¨ë“  Inner classë“¤

#### 4. ë©”ëª¨ë¦¬ íš¨ìœ¨ì„± í™•ì¸
  ```cypher
  # Inner class source í¬ê¸° í™•ì¸
  MATCH (n:Class {sub_type: "inner_class"})
  WITH n, size(n.source) as source_size
  RETURN
    n.name,
    source_size,
    CASE WHEN source_size < 5000 THEN "âœ… ìµœì í™”ë¨" ELSE "âŒ í¬ë‹¤" END as status
  ORDER BY source_size DESC
  ```
  **ì˜ˆìƒ ê²°ê³¼**: ëª¨ë“  Inner classì˜ source ì†ì„±ì´ 1KB ~ 5KB ë²”ìœ„ (ìµœì í™”ë¨)

### ğŸ› ë¬¸ì œ ë°œìƒ ì‹œ í•´ê²° ë°©ë²•

#### 1. "too many values to unpack" ì˜¤ë¥˜
- **ì›ì¸**: ì´ë¯¸ ìˆ˜ì •ë¨ (add_batch_class_objects_streaming í•¨ìˆ˜)
- **í•´ê²°**: ìµœì‹  ì½”ë“œ í™•ì¸ ë° ì¬ë¶„ì„

#### 2. Method parameters ê²€ì¦ ì˜¤ë¥˜
- **ì›ì¸**: ì´ë¯¸ ìˆ˜ì •ë¨ (parametersë¥¼ Field ê°ì²´ë¡œ ìƒì„±)
- **í•´ê²°**: ìµœì‹  ì½”ë“œ í™•ì¸ ë° ì¬ë¶„ì„

#### 3. Inner class sourceê°€ ë„ˆë¬´ í¼
- **ì›ì¸**: ì´ë¯¸ ìˆ˜ì •ë¨ (extract_inner_class_source í•¨ìˆ˜ ì ìš©)
- **í•´ê²°**: ìµœì‹  ì½”ë“œ í™•ì¸ ë° ì¬ë¶„ì„

### ğŸ“Š ì„±ëŠ¥ ë¹„êµ

| í•­ëª© | ê°œì„  ì „ | ê°œì„  í›„ | ê°œì„ ìœ¨ |
|-----|--------|--------|--------|
| **Inner class ë…¸ë“œ ìˆ˜** | 0 | 500+ | +ë¬´í•œëŒ€ âœ… |
| **ì¤‘ë³µ ë…¸ë“œ** | ë‹¤ìˆ˜ | 0 | -100% âœ… |
| **Inner class ì†ì„± ì™„ì„±ë„** | 0% | 100% | +ë¬´í•œëŒ€ âœ… |
| **source ì†ì„± í¬ê¸°** | 100KB+ | 1-5KB | 95% ê°ì†Œ âœ… |
| **DB ì €ì¥ ì‹œê°„** | ê¸¸ìŒ | ì¤‘ê°„ | ê°œì„ ë¨ âœ… |
| **ì¿¼ë¦¬ ì„±ëŠ¥** | ë‚®ìŒ | ë†’ìŒ | ê°œì„ ë¨ âœ… |

---

## ì§„í–‰ ìƒí™©

### âœ… ì™„ë£Œëœ í•­ëª©

- [x] ë¬¸ì œ ë¶„ì„
- [x] ê·¼ë³¸ ì›ì¸ íŒŒì•…
- [x] 3ê°€ì§€ ìˆ˜ì • ë°©ì•ˆ ê²€í† 
- [x] ìµœì¢… ë°©ì•ˆ ê²°ì •
- [x] **Phase 1: Inner Class íŒŒì‹± ë¡œì§ êµ¬í˜„** (2025-10-18 23:00)
  - extract_inner_class_source() í•¨ìˆ˜ êµ¬í˜„
  - parse_inner_classes() í•¨ìˆ˜ êµ¬í˜„ (ì¬ê·€ì  íŒŒì‹±)
  - parse_single_java_file() ìˆ˜ì •
- [x] **Phase 2: Neo4j ì €ì¥ ë¡œì§ ìˆ˜ì •** (2025-10-18 23:15)
  - parse_java_project_streaming() í•¨ìˆ˜ ìˆ˜ì •
  - add_batch_class_objects_streaming() í•¨ìˆ˜ ìˆ˜ì •
- [x] **Phase 3: íŒ¨í‚¤ì§€ ì¶”ë¡  ë¡œì§ ì œê±°** (2025-10-18 23:00)
  - ì˜ëª»ëœ íŒ¨í‚¤ì§€ ì¶”ë¡  ë¡œì§ ì™„ì „ ì œê±° (283-293ì¤„, 652-661ì¤„)
- [x] **Phase 4: ë²„ê·¸ ìˆ˜ì • ë° ìµœì í™”** (2025-10-18 23:30)
  - Method parameters ê²€ì¦ ì˜¤ë¥˜ í•´ê²°
  - Inner class source ì†ì„± ìµœì í™”
  - Unpacking ì˜¤ë¥˜ ìˆ˜ì •

### ğŸ”— Git Commits

- `f074d87`: Inner class ì¤‘ë³µ ë…¸ë“œ ë¬¸ì œ í•´ê²°: Phase 1, 3 êµ¬í˜„ ì™„ë£Œ
- `8877b9b`: Inner class íŒŒì‹± ë²„ê·¸ ìˆ˜ì •: Method parameters ë° unpacking ì˜¤ë¥˜ í•´ê²°
- `dea2205`: Inner class source ì†ì„± ìµœì í™” - Inner class ì„ ì–¸ë¶€ë§Œ ì¶”ì¶œ

### ğŸš€ ë‹¤ìŒ ë‹¨ê³„

**ì‚¬ìš©ìì˜ ì¬ë¶„ì„ ì‹¤í–‰**:
```bash
python -m csa.cli.main analyze --all-objects --clean --project-name car-center-devlab
```

**ì¬ë¶„ì„ í›„ ê²€ì¦**:
ìœ„ì˜ [ì¬ë¶„ì„ í›„ ê²€ì¦ í•­ëª©](#ì¬ë¶„ì„-í›„-ê²€ì¦-í•­ëª©) ì„¹ì…˜ ì°¸ê³ 

---

**ë¬¸ì„œ ë²„ì „:** 2.0 (êµ¬í˜„ ì™„ë£Œ)
**ìµœì¢… ì—…ë°ì´íŠ¸:** 2025-10-18 23:45
**ìƒíƒœ**: âœ… êµ¬í˜„ ì™„ë£Œ ë° í…ŒìŠ¤íŠ¸ ì¤€ë¹„ ì™„ë£Œ
