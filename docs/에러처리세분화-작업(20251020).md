# ì—ëŸ¬ ì²˜ë¦¬ ë²”ìœ„ ì„¸ë¶„í™” ì‘ì—…

**ì‘ì„±ì¼**: 2025-10-20
**ì‘ì—…ì**: Claude Code
**ìš°ì„ ìˆœìœ„**: ğŸŸ¢ Low
**ì˜ˆìƒ ì‹œê°„**: 1ì‹œê°„

---

## ğŸ“‹ ì‘ì—… ê°œìš”

`generate_spec()` ë©”ì„œë“œì˜ ë„ˆë¬´ ë„“ì€ try-catch ë²”ìœ„ë¥¼ ë‹¨ê³„ë³„ë¡œ ì„¸ë¶„í™”í•˜ì—¬ ì—ëŸ¬ ë°œìƒ ì§€ì ì„ ëª…í™•íˆ íŒŒì•…í•˜ê³  ë¶€ë¶„ì ì¸ ì‹¤íŒ¨ ì²˜ë¦¬ë¥¼ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤.

---

## ğŸ› ë¬¸ì œ ìƒí™©

### í˜„ì¬ ì½”ë“œ
```python
# generator.py:58-124
try:
    # 1. í´ë˜ìŠ¤ ì •ë³´ ì¡°íšŒ
    class_info = self.repository.get_class_info(...)

    # 2. ë©”ì„œë“œ ì •ë³´ ì¡°íšŒ
    methods_data = self.repository.get_methods(...)

    # 3. í•„ë“œ ì •ë³´ ì¡°íšŒ
    fields_data = self.repository.get_fields(...)

    # 4. ì˜ì¡´ì„± ì •ë³´ ì¡°íšŒ
    dependencies_data = self.repository.get_dependencies(...)

    # 5. CRUD ì •ë³´ ì¡°íšŒ (ì˜µì…˜)
    crud_data = []
    if options.include_crud_info:
        crud_data = self.repository.get_crud_info(...)

    # 6-8. ë°ì´í„° ëª¨ë¸ êµ¬ì„±, í…œí”Œë¦¿ ë Œë”ë§, íŒŒì¼ ì €ì¥
    ...

except Exception as e:
    logger.error(f"Error generating class specification: {e}", exc_info=True)
    result["message"] = f"Error: {str(e)}"
```

### ë¬¸ì œì 
1. **ì—ëŸ¬ ìœ„ì¹˜ ë¶ˆëª…í™•**: ì–´ëŠ ë‹¨ê³„ì—ì„œ ì‹¤íŒ¨í–ˆëŠ”ì§€ ì•Œê¸° ì–´ë ¤ì›€
2. **ë¶€ë¶„ ì‹¤íŒ¨ ë¶ˆê°€**: CRUD ì •ë³´ ì‹¤íŒ¨ ì‹œ ì „ì²´ ì‹¤íŒ¨ (ì„ íƒì  ì •ë³´ì¸ë°ë„)
3. **ë””ë²„ê¹… ì–´ë ¤ì›€**: ë¡œê·¸ë§Œìœ¼ë¡œëŠ” ì›ì¸ íŒŒì•… í˜ë“¦

---

## ğŸ”§ í•´ê²° ë°©ì•ˆ

### ë‹¨ê³„ë³„ ì—ëŸ¬ ì²˜ë¦¬
```python
try:
    # 1. í´ë˜ìŠ¤ ì •ë³´ ì¡°íšŒ (í•„ìˆ˜)
    class_info = self.repository.get_class_info(...)
    if not class_info:
        result["message"] = f"Class not found: {options.class_name}"
        logger.error(result["message"])
        return result

    logger.info(f"âœ“ Class information retrieved: {class_info['class_name']}")

    # 2-4. í•„ìˆ˜ ì •ë³´ ì¡°íšŒ
    try:
        methods_data = self.repository.get_methods(...)
        logger.info(f"âœ“ Methods retrieved: {len(methods_data)}")

        fields_data = self.repository.get_fields(...)
        logger.info(f"âœ“ Fields retrieved: {len(fields_data)}")

        dependencies_data = self.repository.get_dependencies(...)
        logger.info(f"âœ“ Dependencies retrieved: {len(dependencies_data)}")
    except Exception as e:
        logger.error(f"Error retrieving class details: {e}", exc_info=True)
        raise  # í•„ìˆ˜ ì •ë³´ì´ë¯€ë¡œ ì‹¤íŒ¨ ì‹œ ì¤‘ë‹¨

    # 5. CRUD ì •ë³´ ì¡°íšŒ (ì„ íƒì , ì‹¤íŒ¨í•´ë„ ê³„ì† ì§„í–‰)
    crud_data = []
    if options.include_crud_info:
        try:
            crud_data = self.repository.get_crud_info(...)
            logger.info(f"âœ“ CRUD information retrieved: {len(crud_data)} tables")
        except Exception as e:
            logger.warning(f"Failed to retrieve CRUD info: {e}, continuing without it")
            # ì‹¤íŒ¨í•´ë„ ê³„ì† ì§„í–‰

    # 6-8. í…œí”Œë¦¿ ì²˜ë¦¬
    try:
        spec_data = self._build_spec_data(...)
        spec_content = self.template.render(spec_data)
        file_path = self._save_spec(spec_content, spec_data, options.output_dir)
        logger.info(f"Specification saved to: {file_path}")
    except Exception as e:
        logger.error(f"Error generating specification document: {e}", exc_info=True)
        raise

    result["success"] = True
    result["message"] = "Class specification generated successfully"
    result["file_path"] = file_path
    ...

except Exception as e:
    logger.error(f"Error generating class specification: {e}", exc_info=True)
    result["message"] = f"Error: {str(e)}"
```

---

## ğŸ“ ìˆ˜ì • ê³„íš

### Step 1: í´ë˜ìŠ¤ ì •ë³´ ì¡°íšŒ ì—ëŸ¬ ì²˜ë¦¬ ì¶”ê°€
**Before**:
```python
class_info = self.repository.get_class_info(...)
if not class_info:
    result["message"] = f"Class not found..."
    return result
```

**After** (ë¡œê·¸ ì¶”ê°€):
```python
class_info = self.repository.get_class_info(...)
if not class_info:
    result["message"] = f"Class not found: {options.class_name} in project {options.project_name}"
    logger.error(result["message"])
    return result

logger.info(f"âœ“ Class information retrieved: {class_info['class_name']}")
```

---

### Step 2: í•„ìˆ˜ ì •ë³´ ì¡°íšŒ ê·¸ë£¹í™”
**Before** (ê°œë³„):
```python
methods_data = self.repository.get_methods(...)
logger.info(f"âœ“ Methods retrieved: {len(methods_data)}")

fields_data = self.repository.get_fields(...)
logger.info(f"âœ“ Fields retrieved: {len(fields_data)}")
```

**After** (try-catchë¡œ ê·¸ë£¹í™”):
```python
try:
    methods_data = self.repository.get_methods(...)
    logger.info(f"âœ“ Methods retrieved: {len(methods_data)}")

    fields_data = self.repository.get_fields(...)
    logger.info(f"âœ“ Fields retrieved: {len(fields_data)}")

    dependencies_data = self.repository.get_dependencies(...)
    logger.info(f"âœ“ Dependencies retrieved: {len(dependencies_data)}")
except Exception as e:
    logger.error(f"Error retrieving class details: {e}", exc_info=True)
    raise
```

---

### Step 3: CRUD ì •ë³´ ì¡°íšŒ ì„ íƒì  ì²˜ë¦¬
**Before** (ì‹¤íŒ¨ ì‹œ ì „ì²´ ì‹¤íŒ¨):
```python
crud_data = []
if options.include_crud_info:
    crud_data = self.repository.get_crud_info(...)
    logger.info(f"âœ“ CRUD information retrieved: {len(crud_data)} tables")
```

**After** (ì‹¤íŒ¨í•´ë„ ê³„ì† ì§„í–‰):
```python
crud_data = []
if options.include_crud_info:
    try:
        crud_data = self.repository.get_crud_info(...)
        logger.info(f"âœ“ CRUD information retrieved: {len(crud_data)} tables")
    except Exception as e:
        logger.warning(f"Failed to retrieve CRUD info: {e}, continuing without it")
        # ì‹¤íŒ¨í•´ë„ ê³„ì† ì§„í–‰
```

---

### Step 4: í…œí”Œë¦¿ ì²˜ë¦¬ ì—ëŸ¬ ì²˜ë¦¬
**Before**:
```python
spec_data = self._build_spec_data(...)
spec_content = self.template.render(spec_data)
file_path = self._save_spec(...)
```

**After**:
```python
try:
    spec_data = self._build_spec_data(...)
    spec_content = self.template.render(spec_data)
    file_path = self._save_spec(spec_content, spec_data, options.output_dir)
    logger.info(f"Specification saved to: {file_path}")
except Exception as e:
    logger.error(f"Error generating specification document: {e}", exc_info=True)
    raise
```

---

## ğŸ“Š íš¨ê³¼

### ì—ëŸ¬ ë©”ì‹œì§€ ê°œì„ 
**Before**:
```
Error generating class specification: 'schema'
```

**After**:
```
Error retrieving class details: 'schema'
  OR
Failed to retrieve CRUD info: 'schema', continuing without it
  OR
Error generating specification document: 'schema'
```

### ê²¬ê³ ì„± í–¥ìƒ
- CRUD ì •ë³´ ì‹¤íŒ¨í•´ë„ ë‚˜ë¨¸ì§€ ëª…ì„¸ì„œ ìƒì„± ê°€ëŠ¥
- ì—ëŸ¬ ë°œìƒ ë‹¨ê³„ ì¦‰ì‹œ íŒŒì•…

---

## âœ… í…ŒìŠ¤íŠ¸ ê³„íš

### 1. ì •ìƒ ì¼€ì´ìŠ¤
```bash
python -m csa.cli.main class-spec \
  --project-name car-center-devlab \
  --class-name NotificationRepository
```

**ê¸°ëŒ€ ê²°ê³¼**:
- âœ… ëª¨ë“  ë‹¨ê³„ ì„±ê³µ
- âœ… íŒŒì¼ ì •ìƒ ìƒì„±

### 2. í´ë˜ìŠ¤ ì—†ëŠ” ê²½ìš°
```bash
python -m csa.cli.main class-spec \
  --project-name car-center-devlab \
  --class-name NonExistentClass
```

**ê¸°ëŒ€ ê²°ê³¼**:
```
Error: Class not found: NonExistentClass in project car-center-devlab
```

### 3. CRUD ì •ë³´ ì‹¤íŒ¨ ì‹œ
(Neo4jì—ì„œ CRUD ê´€ë ¨ ë°ì´í„° ì—†ëŠ” ê²½ìš°)

**ê¸°ëŒ€ ê²°ê³¼**:
- âš ï¸ WARNING: Failed to retrieve CRUD info...
- âœ… ë‚˜ë¨¸ì§€ ëª…ì„¸ì„œ ì •ìƒ ìƒì„±

---

## ğŸ“‹ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] Step 1: í´ë˜ìŠ¤ ì •ë³´ ì¡°íšŒ ì—ëŸ¬ ì²˜ë¦¬ ê°œì„ 
- [ ] Step 2: í•„ìˆ˜ ì •ë³´ ì¡°íšŒ ê·¸ë£¹í™”
- [ ] Step 3: CRUD ì •ë³´ ì„ íƒì  ì²˜ë¦¬
- [ ] Step 4: í…œí”Œë¦¿ ì²˜ë¦¬ ì—ëŸ¬ ì²˜ë¦¬
- [ ] í…ŒìŠ¤íŠ¸ 1: ì •ìƒ ì¼€ì´ìŠ¤
- [ ] í…ŒìŠ¤íŠ¸ 2: í´ë˜ìŠ¤ ì—†ëŠ” ê²½ìš°
- [ ] í…ŒìŠ¤íŠ¸ 3: ë¶€ë¶„ ì‹¤íŒ¨ ì¼€ì´ìŠ¤
- [ ] Git commit

---

## ğŸ¯ ì™„ë£Œ ê¸°ì¤€

1. âœ… ì—ëŸ¬ ë°œìƒ ë‹¨ê³„ ëª…í™•íˆ êµ¬ë¶„
2. âœ… ì„ íƒì  ì •ë³´ ì‹¤íŒ¨ ì‹œ ê³„ì† ì§„í–‰
3. âœ… ë¡œê·¸ ë©”ì‹œì§€ ê°œì„ 

---

## ğŸ“ ì‘ì—… ë¡œê·¸

### ì‹œì‘ ì‹œê°„
- 2025-10-20 21:15:00

### ì¢…ë£Œ ì‹œê°„
- (ì‘ì—… ì™„ë£Œ í›„ ê¸°ë¡)

### ì‹¤ì œ ì†Œìš” ì‹œê°„
- (ì‘ì—… ì™„ë£Œ í›„ ê¸°ë¡)

### ì´ìŠˆ/íŠ¹ì´ì‚¬í•­
- (ì‘ì—… ì¤‘ ë°œê²¬ëœ ì´ìŠˆ ê¸°ë¡)
