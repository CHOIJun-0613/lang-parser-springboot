# í´ë˜ìŠ¤ ëª…ì„¸ì„œ ìƒì„± ê¸°ëŠ¥ ì½”ë“œ ë¦¬ë·°

**ì‘ì„±ì¼**: 2025-10-20
**ì‘ì„±ì**: Claude Code
**ë¦¬ë·° ëŒ€ìƒ**: í´ë˜ìŠ¤ ëª…ì„¸ì„œ ìƒì„± ê¸°ëŠ¥ ì „ì²´

---

## ğŸ“‹ ë¦¬ë·° ë²”ìœ„

- `csa/models/class_spec.py` - ë°ì´í„° ëª¨ë¸
- `csa/services/class_spec/repository.py` - Neo4j ì¿¼ë¦¬
- `csa/services/class_spec/template.py` - í…œí”Œë¦¿ ë Œë”ë§
- `csa/services/class_spec/generator.py` - ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°
- `csa/cli/commands/class_spec.py` - CLI ëª…ë ¹ì–´

---

## ğŸ› ë°œê²¬ëœ ë¬¸ì œì 

### 1. âš ï¸ **Critical: Pydantic í•„ë“œëª… ì¶©ëŒ** (models/class_spec.py:81)

**ë¬¸ì œ**:
```python
class TableUsageSpec(BaseModel):
    table_name: str
    schema: str = "public"  # â† ë¬¸ì œ!
    operations: List[str] = []
    description: str = ""
```

**ì¦ìƒ**:
```
UserWarning: Field name "schema" in "TableUsageSpec" shadows an attribute in parent "BaseModel"
```

**ì›ì¸**:
- Pydantic `BaseModel`ì€ ì´ë¯¸ `schema()` ë©”ì„œë“œë¥¼ ê°€ì§€ê³  ìˆìŒ
- í•„ë“œëª… `schema`ê°€ ì´ ë©”ì„œë“œë¥¼ ê°€ë¦¼ (shadowing)

**í•´ê²° ë°©ì•ˆ**:
```python
class TableUsageSpec(BaseModel):
    table_name: str
    db_schema: str = "public"  # schema â†’ db_schemaë¡œ ë³€ê²½
    operations: List[str] = []
    description: str = ""
```

**ì˜í–¥ ë²”ìœ„**:
- `repository.py`: `get_crud_info()` ë©”ì„œë“œ
- `template.py`: `_render_database_info()` ë©”ì„œë“œ
- `generator.py`: `_build_spec_data()` ë©”ì„œë“œ

**ìš°ì„ ìˆœìœ„**: ğŸ”´ High (ê²½ê³  ì œê±° ë° ì½”ë“œ ëª…í™•ì„± í–¥ìƒ)

---

### 2. âš ï¸ **Medium: JSON íŒŒì‹± ë¡œì§ ì¤‘ë³µ** (repository.py)

**ë¬¸ì œ**:
ë™ì¼í•œ JSON íŒŒì‹± íŒ¨í„´ì´ ì—¬ëŸ¬ ê³³ì—ì„œ ë°˜ë³µë¨:

```python
# get_class_info()ì—ì„œ
annotations = record["annotations"] or []
if isinstance(annotations, str):
    try:
        annotations = json.loads(annotations)
    except json.JSONDecodeError:
        annotations = []

# get_methods()ì—ì„œ
annotations = record["annotations"] or []
if isinstance(annotations, str):
    try:
        annotations = json.loads(annotations)
    except json.JSONDecodeError:
        annotations = []

# get_fields()ì—ì„œ
annotations = record["annotations"] or []
if isinstance(annotations, str):
    try:
        annotations = json.loads(annotations)
    except json.JSONDecodeError:
        annotations = []
```

**ë¬¸ì œì **:
- ì½”ë“œ ì¤‘ë³µ (DRY ì›ì¹™ ìœ„ë°˜)
- ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€
- ì—ëŸ¬ ë¡œê¹… ëˆ„ë½

**í•´ê²° ë°©ì•ˆ**:
```python
def _parse_json_field(self, value: Any, default: Any = None, field_name: str = "") -> Any:
    """
    JSON í•„ë“œë¥¼ ì•ˆì „í•˜ê²Œ íŒŒì‹±

    Args:
        value: íŒŒì‹±í•  ê°’
        default: íŒŒì‹± ì‹¤íŒ¨ ì‹œ ê¸°ë³¸ê°’
        field_name: í•„ë“œëª… (ë¡œê¹…ìš©)

    Returns:
        íŒŒì‹±ëœ ê°’ ë˜ëŠ” ê¸°ë³¸ê°’
    """
    if not value:
        return default if default is not None else []

    if isinstance(value, str):
        try:
            return json.loads(value)
        except json.JSONDecodeError as e:
            logger.warning(f"Failed to parse JSON field '{field_name}': {e}, value: {value[:100]}")
            return default if default is not None else []

    return value
```

**ì‚¬ìš© ì˜ˆì‹œ**:
```python
annotations = self._parse_json_field(record["annotations"], [], "annotations")
modifiers = self._parse_json_field(record["modifiers"], [], "modifiers")
interfaces = self._parse_json_field(record["interfaces"], [], "interfaces")
```

**ìš°ì„ ìˆœìœ„**: ğŸŸ¡ Medium (ì½”ë“œ í’ˆì§ˆ í–¥ìƒ, ë””ë²„ê¹… ê°œì„ )

---

### 3. âš ï¸ **Low: Markdown íŠ¹ìˆ˜ë¬¸ì ì´ìŠ¤ì¼€ì´í”„ ëˆ„ë½** (template.py)

**ë¬¸ì œ**:
Markdown í…Œì´ë¸”ì— íŠ¹ìˆ˜ë¬¸ì(íŠ¹íˆ `|`)ê°€ í¬í•¨ë˜ë©´ í…Œì´ë¸” êµ¬ì¡°ê°€ ê¹¨ì§ˆ ìˆ˜ ìˆìŒ

```python
# í˜„ì¬ ì½”ë“œ (template.py:116)
lines.append(
    f"| {idx} | {field.name} | {field.logical_name or '-'} | {field.type} | "
    f"{modifiers} | {annotations} | {initial_value} | {description} |"
)
```

**ë¬¸ì œ ì‹œë‚˜ë¦¬ì˜¤**:
- `field.type = "Map<String, String>"`
- `annotations = "@JsonProperty(value=\"user|admin\")"`

**í•´ê²° ë°©ì•ˆ**:
```python
def _escape_markdown_table_cell(self, text: str) -> str:
    """Markdown í…Œì´ë¸” ì…€ ë‚´ íŠ¹ìˆ˜ë¬¸ì ì´ìŠ¤ì¼€ì´í”„"""
    if not text or text == '-':
        return text
    # íŒŒì´í”„ ë¬¸ìë¥¼ HTML ì—”í‹°í‹°ë¡œ ì¹˜í™˜
    return text.replace('|', '&#124;').replace('\n', ' ')
```

**ì‚¬ìš© ì˜ˆì‹œ**:
```python
lines.append(
    f"| {idx} | {self._escape_markdown_table_cell(field.name)} | "
    f"{self._escape_markdown_table_cell(field.logical_name or '-')} | "
    f"{self._escape_markdown_table_cell(field.type)} | ..."
)
```

**ìš°ì„ ìˆœìœ„**: ğŸŸ¢ Low (ì—£ì§€ ì¼€ì´ìŠ¤, ë°œìƒ ë¹ˆë„ ë‚®ìŒ)

---

### 4. âš ï¸ **Low: ì—ëŸ¬ ì²˜ë¦¬ ë²”ìœ„ê°€ ë„ˆë¬´ ë„“ìŒ** (generator.py:58-124)

**ë¬¸ì œ**:
```python
try:
    # 1. í´ë˜ìŠ¤ ì •ë³´ ì¡°íšŒ
    class_info = self.repository.get_class_info(...)
    # 2. ë©”ì„œë“œ ì •ë³´ ì¡°íšŒ
    methods_data = self.repository.get_methods(...)
    # 3. í•„ë“œ ì •ë³´ ì¡°íšŒ
    fields_data = self.repository.get_fields(...)
    # ... 7ê°œ ë‹¨ê³„ ëª¨ë‘ í•˜ë‚˜ì˜ try-catch
except Exception as e:
    logger.error(f"Error generating class specification: {e}", exc_info=True)
    result["message"] = f"Error: {str(e)}"
```

**ë¬¸ì œì **:
- ì–´ëŠ ë‹¨ê³„ì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí–ˆëŠ”ì§€ íŒŒì•…í•˜ê¸° ì–´ë ¤ì›€
- ë¶€ë¶„ì ì¸ ì‹¤íŒ¨ ì²˜ë¦¬ ë¶ˆê°€ëŠ¥ (ì˜ˆ: CRUD ì •ë³´ëŠ” ì‹¤íŒ¨í•´ë„ ë‚˜ë¨¸ì§€ëŠ” ìƒì„± ê°€ëŠ¥)

**í•´ê²° ë°©ì•ˆ**:
```python
try:
    # 1. í´ë˜ìŠ¤ ì •ë³´ ì¡°íšŒ (í•„ìˆ˜)
    class_info = self.repository.get_class_info(...)
    if not class_info:
        result["message"] = f"Class not found: {options.class_name}"
        return result

    # 2-4. ë©”ì„œë“œ, í•„ë“œ, ì˜ì¡´ì„± ì¡°íšŒ (í•„ìˆ˜)
    try:
        methods_data = self.repository.get_methods(...)
        fields_data = self.repository.get_fields(...)
        dependencies_data = self.repository.get_dependencies(...)
    except Exception as e:
        logger.error(f"Error retrieving class details: {e}")
        raise

    # 5. CRUD ì •ë³´ ì¡°íšŒ (ì„ íƒì , ì‹¤íŒ¨í•´ë„ ê³„ì† ì§„í–‰)
    crud_data = []
    if options.include_crud_info:
        try:
            crud_data = self.repository.get_crud_info(...)
        except Exception as e:
            logger.warning(f"Failed to retrieve CRUD info: {e}, continuing without it")

    # ... ì´í•˜ ë™ì¼
except Exception as e:
    logger.error(f"Error generating class specification: {e}", exc_info=True)
    result["message"] = f"Error: {str(e)}"
```

**ìš°ì„ ìˆœìœ„**: ğŸŸ¢ Low (ì‚¬ìš©ì„± ê°œì„ , ê²¬ê³ ì„± í–¥ìƒ)

---

### 5. ğŸ’¡ **Enhancement: í™˜ê²½ ë³€ìˆ˜ ê¸°ë³¸ê°’ ì¼ê´€ì„±** (cli/commands/class_spec.py)

**í˜„ì¬ ì½”ë“œ**:
```python
@click.option(
    "--output-dir",
    default=os.getenv("CLASS_SPEC_OUTPUT_DIR", "./output/class-spec"),
    help="Output directory for class specifications",
)
```

**ê°œì„  ì œì•ˆ**:
ë‹¤ë¥¸ ëª…ë ¹ì–´ë“¤ê³¼ ì¼ê´€ì„±ì„ ìœ„í•´ ê¸°ë³¸ê°’ì„ ìƒìˆ˜ë¡œ ê´€ë¦¬:

```python
# csa/cli/constants.py (ì‹ ê·œ ìƒì„±)
DEFAULT_CLASS_SPEC_OUTPUT_DIR = "./output/class-spec"
DEFAULT_SEQUENCE_DIAGRAM_OUTPUT_DIR = "./output/sequence-diagram"
DEFAULT_CRUD_MATRIX_OUTPUT_DIR = "./output/crud-matrix"

# cli/commands/class_spec.py
from csa.cli.constants import DEFAULT_CLASS_SPEC_OUTPUT_DIR

@click.option(
    "--output-dir",
    default=os.getenv("CLASS_SPEC_OUTPUT_DIR", DEFAULT_CLASS_SPEC_OUTPUT_DIR),
    help="Output directory for class specifications",
)
```

**ìš°ì„ ìˆœìœ„**: ğŸŸ¢ Low (ì½”ë“œ êµ¬ì¡° ê°œì„ , ì„ íƒì‚¬í•­)

---

### 6. ğŸ’¡ **Enhancement: íƒ€ì… íŒíŠ¸ ê°œì„ ** (ì „ì²´)

**í˜„ì¬ ì½”ë“œ**:
```python
from typing import Any, Dict, List, Optional

def get_methods(self, project_name: str, class_name: str) -> List[Dict[str, Any]]:
```

**ê°œì„  ì œì•ˆ** (Python 3.9+):
```python
from typing import Optional

def get_methods(self, project_name: str, class_name: str) -> list[dict[str, Any]]:
```

**ì°¸ê³ **:
- í˜„ì¬ í”„ë¡œì íŠ¸ê°€ Python 3.13ì„ ì‚¬ìš© ì¤‘ì´ë¯€ë¡œ ì†Œë¬¸ì íƒ€ì… íŒíŠ¸ ì‚¬ìš© ê°€ëŠ¥
- í•˜ì§€ë§Œ ê¸°ì¡´ ì½”ë“œì™€ì˜ ì¼ê´€ì„±ì„ ìœ„í•´ í˜„ì¬ ë°©ì‹ ìœ ì§€ë„ ê°€ëŠ¥

**ìš°ì„ ìˆœìœ„**: ğŸŸ¢ Low (ì„ íƒì‚¬í•­)

---

## âœ… ì˜ êµ¬í˜„ëœ ë¶€ë¶„

### 1. **ëª…í™•í•œ ì±…ì„ ë¶„ë¦¬**
- Repository: ë°ì´í„° ì¡°íšŒ
- Template: ë Œë”ë§
- Generator: ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
- CLI: ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤

ê° í´ë˜ìŠ¤ê°€ ë‹¨ì¼ ì±…ì„ì„ ê°€ì§€ê³  ìˆì–´ ìœ ì§€ë³´ìˆ˜ê°€ ìš©ì´í•¨

### 2. **Pydantic ëª¨ë¸ í™œìš©**
- íƒ€ì… ì•ˆì •ì„± í™•ë³´
- ë°ì´í„° ê²€ì¦ ìë™í™”
- IDE ìë™ì™„ì„± ì§€ì›

### 3. **ìƒì„¸í•œ Docstring**
- ëª¨ë“  public ë©”ì„œë“œì— í•œêµ­ì–´ docstring ì‘ì„±
- Args, Returns ëª…ì‹œ

### 4. **ë¡œê¹… ì²´ê³„**
- ë‹¨ê³„ë³„ ì§„í–‰ ìƒí™© ë¡œê¹…
- ì—ëŸ¬ ë¡œê¹… (exc_info=True)

### 5. **ì˜µì…˜ ì„¤ê³„**
- `include_crud_info`: ì„ íƒì  ê¸°ëŠ¥ ì œê³µ
- í™•ì¥ ê°€ëŠ¥í•œ êµ¬ì¡° (`include_diagram` ë“±)

### 6. **íŒŒì¼ ì €ì¥ êµ¬ì¡°**
- ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ê³¼ ì¼ê´€ëœ íŒ¨í„´
- íŒ¨í‚¤ì§€ ê²½ë¡œ ê¸°ë°˜ í´ë” ìƒì„±
- íƒ€ì„ìŠ¤íƒ¬í”„ íŒŒì¼ëª…

---

## ğŸ”§ ìˆ˜ì • ìš°ì„ ìˆœìœ„

| ìš°ì„ ìˆœìœ„ | ë¬¸ì œ | ì˜í–¥ë„ | ì‘ì—…ëŸ‰ |
|---------|------|--------|--------|
| ğŸ”´ High | 1. Pydantic í•„ë“œëª… ì¶©ëŒ | ê²½ê³  ë©”ì‹œì§€, ì½”ë“œ ëª…í™•ì„± | 30ë¶„ |
| ğŸŸ¡ Medium | 2. JSON íŒŒì‹± ë¡œì§ ì¤‘ë³µ | ìœ ì§€ë³´ìˆ˜ì„±, ë””ë²„ê¹… | 1ì‹œê°„ |
| ğŸŸ¢ Low | 3. Markdown íŠ¹ìˆ˜ë¬¸ì ì´ìŠ¤ì¼€ì´í”„ | ì—£ì§€ ì¼€ì´ìŠ¤ ì²˜ë¦¬ | 30ë¶„ |
| ğŸŸ¢ Low | 4. ì—ëŸ¬ ì²˜ë¦¬ ë²”ìœ„ ì„¸ë¶„í™” | ê²¬ê³ ì„±, ì‚¬ìš©ì„± | 1ì‹œê°„ |
| ğŸŸ¢ Low | 5. í™˜ê²½ ë³€ìˆ˜ ê¸°ë³¸ê°’ ì¼ê´€ì„± | ì½”ë“œ êµ¬ì¡° | 15ë¶„ |
| ğŸŸ¢ Low | 6. íƒ€ì… íŒíŠ¸ ê°œì„  | ì½”ë“œ ìŠ¤íƒ€ì¼ | 15ë¶„ |

**ê¶Œì¥ ìˆ˜ì • ìˆœì„œ**:
1. ğŸ”´ Pydantic í•„ë“œëª… ì¶©ëŒ (ì¦‰ì‹œ)
2. ğŸŸ¡ JSON íŒŒì‹± ë¡œì§ ì¤‘ë³µ (ì‹œê°„ ìˆì„ ë•Œ)
3. ë‚˜ë¨¸ì§€ëŠ” í•„ìš” ì‹œ ë˜ëŠ” ë¦¬íŒ©í† ë§ ì‹œ

---

## ğŸ“ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ê¶Œì¥ì‚¬í•­

### í˜„ì¬ ìƒíƒœ
- ìˆ˜ë™ í…ŒìŠ¤íŠ¸ë§Œ ìˆ˜í–‰ (NotificationRepository)

### ê¶Œì¥ í…ŒìŠ¤íŠ¸
```python
# tests/unit/test_class_spec_repository.py
def test_parse_json_field():
    """JSON í•„ë“œ íŒŒì‹± í…ŒìŠ¤íŠ¸"""
    pass

def test_get_class_info_not_found():
    """ì¡´ì¬í•˜ì§€ ì•ŠëŠ” í´ë˜ìŠ¤ ì¡°íšŒ ì‹œ None ë°˜í™˜"""
    pass

# tests/integration/test_class_spec_generator.py
def test_generate_spec_for_repository():
    """Repository í´ë˜ìŠ¤ ëª…ì„¸ì„œ ìƒì„± í…ŒìŠ¤íŠ¸"""
    pass

def test_generate_spec_for_controller():
    """Controller í´ë˜ìŠ¤ ëª…ì„¸ì„œ ìƒì„± í…ŒìŠ¤íŠ¸"""
    pass

def test_generate_spec_with_special_characters():
    """íŠ¹ìˆ˜ë¬¸ì í¬í•¨ ì‹œ Markdown ì •ìƒ ìƒì„±"""
    pass
```

---

## ğŸ¯ ê²°ë¡ 

### ì „ì²´ í‰ê°€: â­â­â­â­ (4/5)

**ì¥ì **:
- âœ… ëª…í™•í•œ ì„¤ê³„ì™€ ì±…ì„ ë¶„ë¦¬
- âœ… ê³„íšì„œëŒ€ë¡œ ëª¨ë“  ê¸°ëŠ¥ êµ¬í˜„
- âœ… í•œêµ­ í‘œì¤€ í¬ë§· ì¤€ìˆ˜
- âœ… í™•ì¥ ê°€ëŠ¥í•œ êµ¬ì¡°

**ê°œì„  í•„ìš”**:
- âš ï¸ Pydantic í•„ë“œëª… ì¶©ëŒ (ì¦‰ì‹œ ìˆ˜ì • ê¶Œì¥)
- âš ï¸ ì½”ë“œ ì¤‘ë³µ ì œê±° (ë¦¬íŒ©í† ë§ ê¶Œì¥)
- ğŸ’¡ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ì¶”ê°€

**ì¢…í•© ì˜ê²¬**:
ì „ì²´ì ìœ¼ë¡œ ì˜ êµ¬í˜„ë˜ì—ˆìœ¼ë©°, 1~2ê°œì˜ ì¦‰ì‹œ ìˆ˜ì •ì´ í•„ìš”í•œ í•­ëª©ì„ ì œì™¸í•˜ë©´ í”„ë¡œë•ì…˜ì— ì‚¬ìš© ê°€ëŠ¥í•œ ìˆ˜ì¤€ì…ë‹ˆë‹¤.
íŠ¹íˆ ì„¤ê³„ êµ¬ì¡°ê°€ íƒ„íƒ„í•˜ì—¬ í–¥í›„ ê¸°ëŠ¥ í™•ì¥(PDF ì¶œë ¥, Excel ì§€ì› ë“±)ì— ìœ ë¦¬í•©ë‹ˆë‹¤.

---

---

## ğŸ”§ ì¶”ê°€ ë°œê²¬ ì‚¬í•­ (2025-10-20 22:00)

### 7. âš ï¸ **Critical: Annotations Dict í˜•íƒœ ë³€í™˜ í•„ìš”** (repository.py)

**ë¬¸ì œ**:
Neo4jì— ì €ì¥ëœ annotationsê°€ dict í˜•íƒœë¡œ ì €ì¥ë˜ì–´ Pydantic ê²€ì¦ ì‹¤íŒ¨:

```python
# Neo4j ë°ì´í„°
annotations = [
  {'name': 'PutMapping', 'parameters': {}},
  {'name': 'Operation', 'parameters': {...}},
]

# Pydantic ëª¨ë¸
class MethodSpec(BaseModel):
    annotations: List[str]  # â† dictë¥¼ stringìœ¼ë¡œ ë³€í™˜ í•„ìš”!
```

**ì—ëŸ¬ ë©”ì‹œì§€**:
```
ValidationError: Input should be a valid string [type=string_type, input_value={'name': 'PutMapping', 'parameters': {}}, input_type=dict]
```

**í•´ê²° ë°©ì•ˆ**:
```python
def _normalize_annotations(self, annotations: Any) -> List[str]:
    """ì–´ë…¸í…Œì´ì…˜ì„ ë¬¸ìì—´ ë¦¬ìŠ¤íŠ¸ë¡œ ì •ê·œí™”"""
    if not annotations or not isinstance(annotations, list):
        return []

    result = []
    for item in annotations:
        if isinstance(item, dict):
            # {'name': 'PutMapping', 'parameters': {}} -> '@PutMapping'
            name = item.get('name', '')
            if name:
                result.append(f"@{name}")
        elif isinstance(item, str):
            result.append(item)
        else:
            result.append(str(item))

    return result
```

**ì ìš© ìœ„ì¹˜**:
- `get_class_info()`: í´ë˜ìŠ¤ annotations ì •ê·œí™”
- `get_methods()`: ë©”ì„œë“œ annotations ì •ê·œí™”
- `get_fields()`: í•„ë“œ annotations ì •ê·œí™”

**ìˆ˜ì • ì™„ë£Œ**: âœ… 2025-10-20 22:42
- `repository.py`ì— `_normalize_annotations()` ì¶”ê°€
- 3ê°œ ë©”ì„œë“œì— ì ìš© ì™„ë£Œ
- UserController í…ŒìŠ¤íŠ¸ ì„±ê³µ

**ìš°ì„ ìˆœìœ„**: ğŸ”´ High (í•„ìˆ˜, ì¼ë¶€ í´ë˜ìŠ¤ì—ì„œ ëª…ì„¸ì„œ ìƒì„± ì‹¤íŒ¨)

---

## ğŸ“‹ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì¦‰ì‹œ ìˆ˜ì • í•„ìš” âœ… (ëª¨ë‘ ì™„ë£Œ)
- [x] ~~Pydantic í•„ë“œëª… ì¶©ëŒ ìˆ˜ì • (`schema` â†’ `db_schema`)~~ - **ì™„ë£Œ 2025-10-20 21:00**
- [x] ~~ê´€ë ¨ íŒŒì¼ ì¼ê´„ ìˆ˜ì • (repository, template, generator)~~ - **ì™„ë£Œ 2025-10-20 21:00**
- [x] ~~Annotations dict í˜•íƒœ ë³€í™˜~~ - **ì™„ë£Œ 2025-10-20 22:42**

### ì„ íƒì  ê°œì„  âœ… (ëª¨ë‘ ì™„ë£Œ)
- [x] ~~JSON íŒŒì‹± í—¬í¼ í•¨ìˆ˜ ì¶”ì¶œ~~ - **ì™„ë£Œ 2025-10-20 21:00**
- [x] ~~Markdown íŠ¹ìˆ˜ë¬¸ì ì´ìŠ¤ì¼€ì´í”„~~ - **ì™„ë£Œ 2025-10-20 21:10**
- [x] ~~ì—ëŸ¬ ì²˜ë¦¬ ì„¸ë¶„í™”~~ - **ì™„ë£Œ 2025-10-20 21:30**
- [x] ~~í™˜ê²½ ë³€ìˆ˜ ê¸°ë³¸ê°’ í‘œì¤€í™”~~ - **ì™„ë£Œ 2025-10-20 21:45**
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì¶”ê°€ - (ë¯¸ì •)
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ ì¶”ê°€ - (ë¯¸ì •)

### ë¬¸ì„œí™”
- [x] ~~ìˆ˜ì • ë‚´ì—­ ë¬¸ì„œí™” (ê° ì‘ì—…ë³„ md íŒŒì¼)~~ - **ì™„ë£Œ 2025-10-20**
  - `Pydanticí•„ë“œëª…ì¶©ëŒí•´ê²°-ì‘ì—…(20251020).md`
  - `JSONíŒŒì‹±ë¡œì§ì¤‘ë³µì œê±°-ì‘ì—…(20251020).md`
  - `MarkdowníŠ¹ìˆ˜ë¬¸ìì´ìŠ¤ì¼€ì´í”„-ì‘ì—…(20251020).md`
  - `ì—ëŸ¬ì²˜ë¦¬ì„¸ë¶„í™”-ì‘ì—…(20251020).md`
  - `í™˜ê²½ë³€ìˆ˜ê¸°ë³¸ê°’í‘œì¤€í™”-ì‘ì—…(20251020).md`
- [ ] READMEì— class-spec ëª…ë ¹ì–´ ì‚¬ìš©ë²• ì¶”ê°€ - (ë³´ë¥˜)
- [ ] CLAUDE.md ì—…ë°ì´íŠ¸ - (ë³´ë¥˜)
- [ ] ì˜ˆì œ ëª…ì„¸ì„œ ìŠ¤í¬ë¦°ìƒ· ì¶”ê°€ - (ë³´ë¥˜)

---

## ğŸ‰ ìˆ˜ì • ì™„ë£Œ ìš”ì•½ (2025-10-20)

### ìˆ˜ì •ëœ íŒŒì¼ (ì´ 6ê°œ)
1. **`csa/models/class_spec.py`**
   - `schema` â†’ `db_schema` í•„ë“œëª… ë³€ê²½

2. **`csa/services/class_spec/repository.py`**
   - `_parse_json_field()` í—¬í¼ ë©”ì„œë“œ ì¶”ê°€ (JSON íŒŒì‹± ì¤‘ë³µ ì œê±°)
   - `_normalize_annotations()` í—¬í¼ ë©”ì„œë“œ ì¶”ê°€ (dict â†’ string ë³€í™˜)
   - `get_class_info()`, `get_methods()`, `get_fields()` ìˆ˜ì •
   - `get_crud_info()`: `schema` â†’ `db_schema`

3. **`csa/services/class_spec/template.py`**
   - `_escape_markdown_table_cell()` í—¬í¼ ë©”ì„œë“œ ì¶”ê°€
   - ëª¨ë“  í…Œì´ë¸” ë Œë”ë§ì— ì´ìŠ¤ì¼€ì´í”„ ì ìš©
   - `_render_database_info()`: `schema` â†’ `db_schema`

4. **`csa/services/class_spec/generator.py`**
   - ì—ëŸ¬ ì²˜ë¦¬ ì„¸ë¶„í™” (í•„ìˆ˜/ì„ íƒì  ì²˜ë¦¬ êµ¬ë¶„)
   - CRUD ì •ë³´ ì‹¤íŒ¨ ì‹œ ê³„ì† ì§„í–‰ ë¡œì§ ì¶”ê°€

5. **`csa/cli/commands/class_spec.py`**
   - í™˜ê²½ ë³€ìˆ˜ ê¸°ë³¸ê°’: `./output/class-spec` â†’ `output/class-spec`

6. **`env.example`**
   - ì¶œë ¥ ê²½ë¡œ í‘œì¤€í™” (`./output/...` â†’ `output/...`)

### í…ŒìŠ¤íŠ¸ ê²°ê³¼
- âœ… NotificationRepository ëª…ì„¸ì„œ ìƒì„± ì„±ê³µ
- âœ… UserController ëª…ì„¸ì„œ ìƒì„± ì„±ê³µ (annotations ì •ê·œí™” í™•ì¸)
- âœ… í´ë˜ìŠ¤ ì—†ëŠ” ê²½ìš° ì—ëŸ¬ ì²˜ë¦¬ ì •ìƒ
- âœ… í™˜ê²½ ë³€ìˆ˜ ê¸°ë³¸ê°’ ì •ìƒ ì‘ë™

### ì¶”ê°€ ìˆ˜ì • (CRUD Matrix ê´€ë ¨)
- **`csa/services/graph_db/persistence_nodes.py`**
  - `create_method_sql_relationships()` ë°˜í™˜ íƒ€ì…: `None` â†’ `int`
  - CRUD Matrix ìë™ ìƒì„± ê¸°ëŠ¥ ì •ìƒí™”

---

**ê²€í†  ì™„ë£Œì¼**: 2025-10-20
**ìˆ˜ì • ì™„ë£Œì¼**: 2025-10-20
**ìµœì¢… ìƒíƒœ**: âœ… ëª¨ë“  í•„ìˆ˜ ë° ì„ íƒì  ê°œì„  ì™„ë£Œ
